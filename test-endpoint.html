<!DOCTYPE html>
<html>
<head>
    <title>Test Endpoint</title>
</head>
<body>
    <h1>Test del Endpoint</h1>
    <button onclick="testSimple()">Probar /test-ajax</button>
    <button onclick="testEndpoint()">Probar /org/1/ajax/clientes-por-sector/1</button>
    <div id="resultado"></div>

    <script>
    function testSimple() {
        console.log('Probando ruta simple...');
        document.getElementById('resultado').innerHTML = 'Probando ruta simple...';
        
        fetch('/hydrosite/public_html/index.php/test-ajax')
            .then(response => {
                console.log('Simple Response:', response);
                console.log('Status:', response.status);
                return response.text();
            })
            .then(text => {
                console.log('Simple Text response:', text);
                document.getElementById('resultado').innerHTML = '<h3>Test Simple:</h3><pre>' + text + '</pre>';
            })
            .catch(error => {
                console.error('Simple Error:', error);
                document.getElementById('resultado').innerHTML = 'Error en test simple: ' + error.message;
            });
    }
    
    function testEndpoint() {
        console.log('Iniciando test...');
        document.getElementById('resultado').innerHTML += '<br><br>Probando endpoint completo...';
        
        fetch('/hydrosite/public_html/index.php/org/1/ajax/clientes-por-sector/1')
            .then(response => {
                console.log('Response:', response);
                console.log('Status:', response.status);
                console.log('OK:', response.ok);
                return response.text();
            })
            .then(text => {
                console.log('Text response:', text);
                document.getElementById('resultado').innerHTML = '<pre>' + text + '</pre>';
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('resultado').innerHTML = 'Error: ' + error.message;
            });
    }
    </script>
</body>
</html>
